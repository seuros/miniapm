---
http_interactions:
- request:
    method: post
    uri: http://localhost:3000/ingest/v1/traces
    body:
      encoding: UTF-8
      string: '{"resourceSpans":[{"resource":{"attributes":[{"key":"service.name","value":{"stringValue":"miniapm-gem-test"}},{"key":"deployment.environment","value":{"stringValue":"test"}},{"key":"host.name","value":{"stringValue":"MacBookPro.localdomain"}},{"key":"telemetry.sdk.name","value":{"stringValue":"miniapm-ruby"}},{"key":"telemetry.sdk.version","value":{"stringValue":"0.1.0"}},{"key":"telemetry.sdk.language","value":{"stringValue":"ruby"}},{"key":"ruby.version","value":{"stringValue":"3.3.10"}},{"key":"git.sha","value":{"stringValue":"418d00d6e9d9f6099803fbabe6604de8338071ee"}}]},"scopeSpans":[{"scope":{"name":"miniapm-ruby","version":"0.1.0"},"spans":[{"traceId":"4fe6fbde5a9957c17b1f2adbe3427f2d","spanId":"03c2545b66dfa775","name":"INSERT
        INTO orders","kind":3,"startTimeUnixNano":"1767397380468821000","endTimeUnixNano":"1767397380468822000","attributes":[{"key":"db.system","value":{"stringValue":"postgresql"}},{"key":"db.statement","value":{"stringValue":"INSERT
        INTO orders (user_id, total) VALUES ($1, $2)"}}],"status":{"code":0},"parentSpanId":"6d4a7f7567225ca3"},{"traceId":"4fe6fbde5a9957c17b1f2adbe3427f2d","spanId":"70e9d4093c7b7955","name":"POST
        api.stripe.com/v1/charges","kind":3,"startTimeUnixNano":"1767397380468824000","endTimeUnixNano":"1767397380468871000","attributes":[{"key":"http.method","value":{"stringValue":"POST"}},{"key":"http.url","value":{"stringValue":"https://api.stripe.com/v1/charges"}},{"key":"http.status_code","value":{"intValue":"402"}}],"status":{"code":2,"message":"Card
        declined"},"parentSpanId":"6d4a7f7567225ca3","events":[{"name":"exception","timeUnixNano":"1767397380468870000","attributes":[{"key":"exception.type","value":{"stringValue":"RuntimeError"}},{"key":"exception.message","value":{"stringValue":"Card
        declined"}},{"key":"exception.stacktrace","value":{"stringValue":"app/services/payment_processor.rb:42"}}]}]},{"traceId":"4fe6fbde5a9957c17b1f2adbe3427f2d","spanId":"6d4a7f7567225ca3","name":"POST
        /api/orders","kind":2,"startTimeUnixNano":"1767397380468811000","endTimeUnixNano":"1767397380468876000","attributes":[{"key":"http.method","value":{"stringValue":"POST"}},{"key":"http.target","value":{"stringValue":"/api/orders"}},{"key":"http.status_code","value":{"intValue":"422"}}],"status":{"code":2,"message":"Payment
        failed"}}]}]}]}'
    headers:
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
      User-Agent:
      - miniapm-ruby/0.1.0
      Content-Type:
      - application/json
      Authorization:
      - Bearer <API_KEY>
  response:
    status:
      code: 202
      message: Accepted
    headers:
      Content-Length:
      - '0'
      Date:
      - Fri, 02 Jan 2026 23:43:00 GMT
    body:
      encoding: UTF-8
      string: ''
  recorded_at: Fri, 02 Jan 2026 23:43:00 GMT
recorded_with: VCR 6.4.0
