---
http_interactions:
- request:
    method: post
    uri: http://localhost:3000/ingest/v1/traces
    body:
      encoding: UTF-8
      string: '{"resourceSpans":[{"resource":{"attributes":[{"key":"service.name","value":{"stringValue":"miniapm-gem-test"}},{"key":"deployment.environment","value":{"stringValue":"test"}},{"key":"host.name","value":{"stringValue":"MacBookPro.localdomain"}},{"key":"telemetry.sdk.name","value":{"stringValue":"miniapm-ruby"}},{"key":"telemetry.sdk.version","value":{"stringValue":"0.1.0"}},{"key":"telemetry.sdk.language","value":{"stringValue":"ruby"}},{"key":"ruby.version","value":{"stringValue":"3.3.10"}},{"key":"git.sha","value":{"stringValue":"418d00d6e9d9f6099803fbabe6604de8338071ee"}}]},"scopeSpans":[{"scope":{"name":"miniapm-ruby","version":"0.1.0"},"spans":[{"traceId":"e47a07713313bb47c9fb7b4d1918f872","spanId":"7774e2e8b945e15e","name":"SELECT
        users.*","kind":3,"startTimeUnixNano":"1767397380354555000","endTimeUnixNano":"1767397380354557000","attributes":[{"key":"db.system","value":{"stringValue":"postgresql"}},{"key":"db.name","value":{"stringValue":"myapp_production"}},{"key":"db.statement","value":{"stringValue":"SELECT
        * FROM users WHERE id = $1"}}],"status":{"code":0},"parentSpanId":"13f18c590beec508"},{"traceId":"e47a07713313bb47c9fb7b4d1918f872","spanId":"1171f70285c801f0","name":"cache_read
        user:123:profile","kind":1,"startTimeUnixNano":"1767397380354560000","endTimeUnixNano":"1767397380354578000","attributes":[{"key":"cache.key","value":{"stringValue":"user:123:profile"}},{"key":"cache.hit","value":{"boolValue":true}}],"status":{"code":0},"parentSpanId":"13f18c590beec508"},{"traceId":"e47a07713313bb47c9fb7b4d1918f872","spanId":"7846ae2a1388358e","name":"GET
        api.gravatar.com/avatar","kind":3,"startTimeUnixNano":"1767397380354581000","endTimeUnixNano":"1767397380354583000","attributes":[{"key":"http.method","value":{"stringValue":"GET"}},{"key":"http.url","value":{"stringValue":"https://api.gravatar.com/avatar/abc123"}},{"key":"http.status_code","value":{"intValue":"200"}}],"status":{"code":1},"parentSpanId":"13f18c590beec508"},{"traceId":"e47a07713313bb47c9fb7b4d1918f872","spanId":"d3a7cbc566131b92","name":"render
        users/_profile.html.erb","kind":1,"startTimeUnixNano":"1767397380354589000","endTimeUnixNano":"1767397380354590000","attributes":[{"key":"template","value":{"stringValue":"users/_profile.html.erb"}}],"status":{"code":0},"parentSpanId":"85bc1d54d6a364fa"},{"traceId":"e47a07713313bb47c9fb7b4d1918f872","spanId":"85bc1d54d6a364fa","name":"render
        users/show.html.erb","kind":1,"startTimeUnixNano":"1767397380354586000","endTimeUnixNano":"1767397380354590000","attributes":[{"key":"template","value":{"stringValue":"users/show.html.erb"}},{"key":"layout","value":{"stringValue":"application"}}],"status":{"code":0},"parentSpanId":"13f18c590beec508"},{"traceId":"e47a07713313bb47c9fb7b4d1918f872","spanId":"13f18c590beec508","name":"UsersController#show","kind":1,"startTimeUnixNano":"1767397380354550000","endTimeUnixNano":"1767397380354591000","attributes":[{"key":"code.namespace","value":{"stringValue":"UsersController"}},{"key":"code.function","value":{"stringValue":"show"}}],"status":{"code":0},"parentSpanId":"cacfbcd4e52eaf75"},{"traceId":"e47a07713313bb47c9fb7b4d1918f872","spanId":"cacfbcd4e52eaf75","name":"GET
        /api/users/123","kind":2,"startTimeUnixNano":"1767397380354522000","endTimeUnixNano":"1767397380354593000","attributes":[{"key":"http.method","value":{"stringValue":"GET"}},{"key":"http.url","value":{"stringValue":"http://localhost:3000/api/users/123"}},{"key":"http.host","value":{"stringValue":"localhost"}},{"key":"http.scheme","value":{"stringValue":"http"}},{"key":"http.target","value":{"stringValue":"/api/users/123"}},{"key":"http.status_code","value":{"intValue":"200"}}],"status":{"code":0}}]}]}]}'
    headers:
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - "*/*"
      User-Agent:
      - miniapm-ruby/0.1.0
      Content-Type:
      - application/json
      Authorization:
      - Bearer <API_KEY>
  response:
    status:
      code: 202
      message: Accepted
    headers:
      Content-Length:
      - '0'
      Date:
      - Fri, 02 Jan 2026 23:43:00 GMT
    body:
      encoding: UTF-8
      string: ''
  recorded_at: Fri, 02 Jan 2026 23:43:00 GMT
recorded_with: VCR 6.4.0
